var x=Object.defineProperty;var g=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var h=(t,s,e)=>s in t?x(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,c=(t,s)=>{for(var e in s||(s={}))k.call(s,e)&&h(t,e,s[e]);if(g)for(var e of g(s))I.call(s,e)&&h(t,e,s[e]);return t};import{S as Y}from"./index-ed3a47fa.js";import{a as B,_ as H,p as w}from"./index-8bf5099d.js";import{M as D,a0 as T,r as m,H as u,o as p,c as R,d as n,t as C,n as i,z as _,A as E,f as j,w as M,a as P,p as z,b as A,s as L}from"./vendor-686b3c9c.js";const y=40,V={name:"music-list",components:{SongList:B,Scroll:Y},props:{songs:{type:Array,default(){return[]}},title:String,pic:String,loading:Boolean,noResultText:{type:String,default:"\u62B1\u6B49\uFF0C\u6CA1\u6709\u627E\u5230\u53EF\u64AD\u653E\u7684\u6B4C\u66F2"},rank:{type:Boolean,default:!1}},data(){return{imageHeight:0,scrollY:0,maxTranslateY:0}},computed:c({playBtnStyle(){let t="";return this.scrollY>=this.maxTranslateY&&(t="none"),{display:t}},noResult(){return!this.loading&&!this.songs.length},bgImageStyle(){const t=this.scrollY;let s=0,e="70%",l=0,o=0;t>this.maxTranslateY&&(s=10,e=0,o=1,l=`${y}px`);let a=1;return t<0&&(a=1+Math.abs(t/this.imageHeight)),{zIndex:s,paddingTop:e,height:l,backgroundImage:`url(${this.pic})`,transform:`scale(${a})translateZ(${o}px)`}},scrollStyle(){const t=this.playlist.length?"60px":"0";return{top:`${this.imageHeight}px`,bottom:t}},filterStyle(){let t=0;const s=this.scrollY,e=this.imageHeight;return s>=0&&(t=Math.min(this.maxTranslateY/e,s/e)*20),{backdropFilter:`blur(${t}px)`}}},D(["playlist"])),mounted(){this.imageHeight=this.$refs.bgImage.clientHeight,this.maxTranslateY=this.imageHeight-y},methods:c({goBack(){this.$router.back()},onScroll(t){this.scrollY=-t.y},selectItem({song:t,index:s}){this.selectPlay({list:this.songs,index:s})},random(){this.randomPlay(this.songs)}},T(["selectPlay","randomPlay"]))},d=t=>(z("data-v-062f2f44"),t=t(),A(),t),N={class:"music-list"},Z=d(()=>n("i",{class:"icon-back"},null,-1)),F=[Z],G={class:"title"},O=d(()=>n("i",{class:"icon-play"},null,-1)),q=d(()=>n("span",{class:"text"},"\u968F\u673A\u64AD\u653E\u5168\u90E8",-1)),J=[O,q],K={class:"song-list-wrapper"};function Q(t,s,e,l,o,a){const f=m("song-list"),S=m("scroll"),b=u("loading"),v=u("no-result");return p(),R("div",N,[n("div",{class:"back",onClick:s[0]||(s[0]=(...r)=>a.goBack&&a.goBack(...r))},F),n("h1",G,C(e.title),1),n("div",{class:"bg-image",style:i(a.bgImageStyle),ref:"bgImage"},[n("div",{class:"play-btn-wrapper",style:i(a.playBtnStyle)},[_(n("div",{class:"play-btn",onClick:s[1]||(s[1]=(...r)=>a.random&&a.random(...r))},J,512),[[E,e.songs.length>0]])],4),n("div",{class:"filter",style:i(a.filterStyle)},null,4)],4),_((p(),j(S,{class:"list",style:i(a.scrollStyle),"probe-type":3,onScroll:a.onScroll},{default:M(()=>[n("div",K,[P(f,{songs:e.songs,onSelect:a.selectItem,rank:e.rank},null,8,["songs","onSelect","rank"])])]),_:1},8,["style","onScroll"])),[[b,e.loading],[v,a.noResult,e.noResultText]])])}var U=H(V,[["render",Q],["__scopeId","data-v-062f2f44"]]);function st(t,s,e){return{name:t,components:{MusicList:U},props:{data:Object},data(){return{songs:[],loading:!0}},computed:{computedData(){let l=null;const o=this.data;if(o)l=o;else{const a=L.session.get(s);a&&(a.mid||a.id+"")===this.$route.params.id&&(l=a)}return l},pic(){const l=this.computedData;return l&&l.pic},title(){const l=this.computedData;return l&&(l.name||l.title)}},async created(){const l=this.computedData;if(!l){const a=this.$route.matched[0].path;this.$router.push({path:a});return}const o=await e(l);this.songs=await w(o.songs),this.loading=!1}}}export{st as c};
