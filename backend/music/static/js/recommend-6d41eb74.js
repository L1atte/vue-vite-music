import{g as C}from"./recommend-7795d6f9.js";import{B as g,S as $,h as _,l as B,m as D,q as T,v as V,o as l,c as o,d as s,F as u,e as m,J as j,s as z,r as p,H as y,z as b,a as h,w as v,f as x,I as N,t as k,T as P,N as R,p as E,b as F}from"./vendor-686b3c9c.js";import{_ as w,A as L}from"./index-8bf5099d.js";import{S as M}from"./index-ed3a47fa.js";g.use($);function U(e){const t=_(null),c=_(0);return B(()=>{(t.value=new g(e.value,{click:!0,scrollX:!0,scrollY:!1,momentum:!1,bounce:!1,probeType:2,slide:!0})).on("slideWillChange",n=>{c.value=n.pageX})}),D(()=>{t.value.destroy()}),T(()=>{t.value.enable(),t.value.refresh()}),V(()=>{t.value.disable()}),{slider:t,currentPageIndex:c}}const X={name:"slider",props:{sliders:{type:Array,default(){return[]}}},setup(){const e=_(null),{currentPageIndex:t}=U(e);return{rootRef:e,currentPageIndex:t}}},Y={class:"slider",ref:"rootRef"},q={class:"slider-group"},H=["href"],J=["src"],K={class:"dots-wrapper"};function W(e,t,c,d,n,i){return l(),o("div",Y,[s("div",q,[(l(!0),o(u,null,m(c.sliders,r=>(l(),o("div",{class:"slider-page",key:r.id},[s("a",{href:r.link},[s("img",{src:r.pic},null,8,J)],8,H)]))),128))]),s("div",K,[(l(!0),o(u,null,m(c.sliders,(r,f)=>(l(),o("span",{class:j(["dot",{active:d.currentPageIndex===e.index}]),key:r.id},null,2))),128))])],512)}var G=w(X,[["render",W],["__scopeId","data-v-9ae48b6a"]]);const O={name:"recommend",components:{Slider:G,Scroll:M},data(){return{sliders:[],albums:[],loadingText:"\u8F7D\u5165\u4E2D",selectedAlbum:null}},computed:{loading(){return!this.sliders.length&&!this.albums.length}},async created(){const e=await C();this.sliders=e.sliders,this.albums=e.albums},methods:{selectItem(e){this.selectedAlbum=e,this.cacheAlbum(e),this.$router.push({path:`/recommend/${e.id}`})},cacheAlbum(e){z.session.set(L,e)}}},Q=e=>(E("data-v-7220ada6"),e=e(),F(),e),Z={class:"recommend"},ee={class:"slider-wrapper"},se={class:"slider-content"},te={class:"recommend-list"},le=Q(()=>s("h1",{class:"list-title"},"\u70ED\u95E8\u6B4C\u5355\u63A8\u8350",-1)),ne=["onClick"],oe={class:"icon"},re={width:"60",height:"60"},ae={class:"text"},ce={class:"name"},de={class:"title"};function ie(e,t,c,d,n,i){const r=p("slider"),f=p("scroll"),I=p("router-view"),S=y("lazy"),A=y("loading");return b((l(),o("div",Z,[h(f,{class:"recommend-content"},{default:v(()=>[s("div",null,[s("div",ee,[s("div",se,[n.sliders.length?(l(),x(r,{key:0,sliders:n.sliders},null,8,["sliders"])):N("",!0)])]),s("div",te,[le,s("ul",null,[(l(!0),o(u,null,m(n.albums,a=>(l(),o("li",{key:a.id,class:"item",onClick:_e=>i.selectItem(a)},[s("div",oe,[b(s("img",re,null,512),[[S,a.pic]])]),s("div",ae,[s("h2",ce,k(a.username),1),s("p",de,k(a.title),1)])],8,ne))),128))])])])]),_:1}),h(I,null,{default:v(({Component:a})=>[h(P,{appear:"",name:"slide"},{default:v(()=>[(l(),x(R(a),{data:n.selectedAlbum},null,8,["data"]))]),_:2},1024)]),_:1})])),[[A,i.loading,n.loadingText]])}var ve=w(O,[["render",ie],["__scopeId","data-v-7220ada6"]]);export{ve as default};
