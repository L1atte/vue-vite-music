var b=Object.defineProperty;var g=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var h=(t,s,e)=>s in t?b(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,c=(t,s)=>{for(var e in s||(s={}))k.call(s,e)&&h(t,e,s[e]);if(g)for(var e of g(s))I.call(s,e)&&h(t,e,s[e]);return t};import{S as Y}from"./index-f7f963dc.js";import{a as H,_ as B,p as w}from"./index-1d3f0f78.js";import{M as D,$ as T,r as m,H as u,o as C,c as R,d as n,t as E,n as i,A as p,C as j,a as _,w as M,p as P,b as A,s as L}from"./vendor-00d748a7.js";const y=40,V={name:"music-list",components:{SongList:H,Scroll:Y},props:{songs:{type:Array,default(){return[]}},title:String,pic:String,loading:Boolean,noResultText:{type:String,default:"\u62B1\u6B49\uFF0C\u6CA1\u6709\u627E\u5230\u53EF\u64AD\u653E\u7684\u6B4C\u66F2"},rank:{type:Boolean,default:!1}},data(){return{imageHeight:0,scrollY:0,maxTranslateY:0}},computed:c({playBtnStyle(){let t="";return this.scrollY>=this.maxTranslateY&&(t="none"),{display:t}},noResult(){return!this.loading&&!this.songs.length},bgImageStyle(){const t=this.scrollY;let s=0,e="70%",l=0,o=0;t>this.maxTranslateY&&(s=10,e=0,o=1,l=`${y}px`);let a=1;return t<0&&(a=1+Math.abs(t/this.imageHeight)),{zIndex:s,paddingTop:e,height:l,backgroundImage:`url(${this.pic})`,transform:`scale(${a})translateZ(${o}px)`}},scrollStyle(){const t=this.playlist.length?"60px":"0";return{top:`${this.imageHeight}px`,bottom:t}},filterStyle(){let t=0;const s=this.scrollY,e=this.imageHeight;return s>=0&&(t=Math.min(this.maxTranslateY/e,s/e)*20),{backdropFilter:`blur(${t}px)`}}},D(["playlist"])),mounted(){this.imageHeight=this.$refs.bgImage.clientHeight,this.maxTranslateY=this.imageHeight-y},methods:c({goBack(){this.$router.back()},onScroll(t){this.scrollY=-t.y},selectItem({song:t,index:s}){this.selectPlay({list:this.songs,index:s})},random(){this.randomPlay(this.songs)}},T(["selectPlay","randomPlay"]))},d=t=>(P("data-v-062f2f44"),t=t(),A(),t),z={class:"music-list"},N=d(()=>n("i",{class:"icon-back"},null,-1)),Z=[N],F={class:"title"},G=d(()=>n("i",{class:"icon-play"},null,-1)),O=d(()=>n("span",{class:"text"},"\u968F\u673A\u64AD\u653E\u5168\u90E8",-1)),q=[G,O],J={class:"song-list-wrapper"};function K(t,s,e,l,o,a){const f=m("song-list"),S=m("scroll"),v=u("loading"),x=u("no-result");return C(),R("div",z,[n("div",{class:"back",onClick:s[0]||(s[0]=(...r)=>a.goBack&&a.goBack(...r))},Z),n("h1",F,E(e.title),1),n("div",{class:"bg-image",style:i(a.bgImageStyle),ref:"bgImage"},[n("div",{class:"play-btn-wrapper",style:i(a.playBtnStyle)},[p(n("div",{class:"play-btn",onClick:s[1]||(s[1]=(...r)=>a.random&&a.random(...r))},q,512),[[j,e.songs.length>0]])],4),n("div",{class:"filter",style:i(a.filterStyle)},null,4)],4),p(_(S,{class:"list",style:i(a.scrollStyle),"probe-type":3,onScroll:a.onScroll},{default:M(()=>[n("div",J,[_(f,{songs:e.songs,onSelect:a.selectItem,rank:e.rank},null,8,["songs","onSelect","rank"])])]),_:1},8,["style","onScroll"]),[[v,e.loading],[x,a.noResult,e.noResultText]])])}var Q=B(V,[["render",K],["__scopeId","data-v-062f2f44"]]);function tt(t,s,e){return{name:t,components:{MusicList:Q},props:{data:Object},data(){return{songs:[],loading:!0}},computed:{computedData(){let l=null;const o=this.data;if(o)l=o;else{const a=L.session.get(s);a&&(a.mid||a.id+"")===this.$route.params.id&&(l=a)}return l},pic(){const l=this.computedData;return l&&l.pic},title(){const l=this.computedData;return l&&(l.name||l.title)}},async created(){const l=this.computedData;if(!l){const a=this.$route.matched[0].path;this.$router.push({path:a});return}const o=await e(l);this.songs=await w(o.songs),this.loading=!1}}}export{tt as c};
